\section{Modern Controller Synthesis}
To unify the controller synthesis the following standard form has been established.


\setlength{\oldtabcolsep}{\tabcolsep}\setlength\tabcolsep{2pt}

\begin{tabularx}{\linewidth}{@{}ll@{}}
    \includegraphics[width=0.5\linewidth, align=c]{controller_synthesis_paradigm.png}
     &
    {\begin{tabularx}{\linewidth}{@{}ll@{}}
                 $u$: & control input            \\
                 $y$: & measured output          \\
                 $r$: & reference signal         \\
                 $w$: & disturbance              \\
                 $z$: & performance output       \\
                 $q$: & uncertainty block input  \\
                 $v$: & uncertainty block output
             \end{tabularx}
        }
\end{tabularx}

\setlength{\tabcolsep}{\oldtabcolsep}


\newpar{}
The objective is to stabilize the system and minimize the performance outputs $z$.

\subsection{Frequency Weights}

To guide the optimization process the performance outputs $z_i$ are weighted with frequency dependent weighting functions $W_i$.

The most common performance outputs are
\begin{center}
    \includegraphics[width=0.9\linewidth]{frequency_weights.png}
\end{center}

\ptitle{Tracking Error} $z_1=W_1 S(s)$
% TODO:
\ptitle{Control Effort} $z_2=W_2 C(s) S(s)$
% TODO:
\ptitle{Noise Rejection} $z_3=-W_3 T(s)$
% TODO:

\ptitle{}% TODO:
Loop transfer function
\begin{equation*}
    L(s)=P(s)C(s)
\end{equation*}

Sensitivity function
\begin{equation*}
    S(s)=G_{er}(s) = {(I+L(s))}^{-1}
\end{equation*}

Complementary sensitivity function
\begin{equation*}
    T(s) = G_{yr}(s)={(I+L(s))}^{-1}L(s) = I-S(s)
\end{equation*}



\begin{equation*}
    W(s) = \frac{M}{Ms/\omega_1 + 1}
\end{equation*}

\begin{equation*}
    W(s) = \frac{Ms}{s/+M\omega_1}
\end{equation*}

\subsection{State-Space Representation}
To synthesize a controller an assembled state space model of the generalized system ($G$) can be constructed.

\ptitle{Plant}
\begin{align*}
    P    & : \left[
        \begin{array}{c|c} % ChkTex -2
            A_p & B_p \\
            \hline % ChkTex -2
            C_p & D_p \\
        \end{array}
    \right]                            \\
    P(s) & = {C_p(sI-A_p)}^{-1}B_p+D_p
\end{align*}

\ptitle{Frequency Weights}

For each weight of the form
\begin{equation*}
    W(s) = \frac{qs+r}{s+p}
\end{equation*}
we get
\begin{equation*}
    W : \left[
        \begin{array}{c|c} % ChkTex -2
            -p   & 1 \\
            \hline % ChkTex -2
            r-qp & q
        \end{array}
        \right]
\end{equation*}

\ptitle{Generalized System}

\begin{align*}
    G    & : \left[
        \begin{array}{c|c c} % ChkTex -2
            A   & B_w    & B_u    \\
            \hline % ChkTex -2
            C_z & D_{zw} & D_{zu} \\
            C_y & D_{yw} & D_{yu}
        \end{array}
    \right]                        \\
    G(s) & = \begin{bmatrix}
                 G_{zw}(s) & G_{zu}(s) \\
                 G_{yw}(s) & G_{yu}(s) \\
             \end{bmatrix}
\end{align*}

\begin{examplesection}[Example Assembly]
    % TODO: 
    \begin{align*}
        \begin{bmatrix}
            y \\
            z
        \end{bmatrix}
         & = G(s) \: u = \begin{bmatrix}
                             G_{yu}(s) \\
                             G_{zu}(s)
                         \end{bmatrix} \: u \\
        \begin{bmatrix}
            \dot{x}_p \\
            \dot{x}_w
        \end{bmatrix}
         & = \begin{bmatrix}
                 A_p & 0   \\
                 0   & A_w
             \end{bmatrix}
        \begin{bmatrix}
            x_p \\
            x_w
        \end{bmatrix}
        + \begin{bmatrix}
              B_p \\
              B_w
          \end{bmatrix} \: u                \\
        \begin{bmatrix}
            y \\
            z
        \end{bmatrix}
         & = \begin{bmatrix}
                 C_p & 0   \\
                 0   & C_w
             \end{bmatrix}
        \begin{bmatrix}
            x_p \\
            x_w
        \end{bmatrix}
        +
        \begin{bmatrix}
            B_p \\
            B_w
        \end{bmatrix}
        \: u
    \end{align*}

    \begin{equation*}
        G = \left[
            \begin{array}{cc|c} % ChkTex -2
                A_p & 0   & B_p \\
                0   & A_w & B_w \\
                \hline % ChkTex -2
                C_p & 0   & D_p \\
                0   & C_w & D_w
            \end{array}
            \right]
    \end{equation*}

\end{examplesection}

\subsection{Youla Parameterization}

\begin{center}
    \includegraphics[width=0.8\linewidth]{youlas_Q_parameterization.png}
\end{center}
